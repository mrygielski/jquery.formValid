function isset(r){return void 0!==r}!function(a){a.fn.formValid=function(r){var e=a.extend({},a.fn.formValid.defaults,r),d={},d={test:function(r,e){var t=r.val();return"postcode"==e?!!t.match("^[0-9]{2}-[0-9]{3}$"):"email"==e?/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t):"number"==e?/^-?[\d.]+(?:e-?\d+)?$/.test(t):"letters"==e?/^[a-zA-Z]*$/.test(t):"phone"==e?/^\+?(\d.*){3,}$/.test(t):void 0},addError:function(r,e){r.addClass("error"),r.find("input,textarea").addClass("error"),""==e?r.find(".valid-message").hide():r.find(".valid-message").html(e)},removeError:function(r){r.removeClass("error"),r.find("input,textarea").removeClass("error"),r.find(".valid-message").html("")},_tests:function(r,e,t,s,a,o){var n=a.val();isset(o)||(o=""),"null"==e&&r&&0==t.errors&&(""==a.val()?(d.addError(a.parent(),s),t.errors++):d.removeError(a.parent())),""!=o&&0==t.errors&&(n.match(new RegExp(o))?d.removeError(a.parent()):(d.addError(a.parent(),s),t.errors++)),"number"==e&&0==t.errors&&(d.test(a,"number")?d.removeError(a.parent()):(d.addError(a.parent(),s),t.errors++)),"email"==e&&0==t.errors&&(d.test(a,"email")?d.removeError(a.parent()):(console.log("error"),d.addError(a.parent(),s),t.errors++)),"letters"==e&&0==t.errors&&(d.test(a,"letters")?d.removeError(a.parent()):(d.addError(a.parent(),s),t.errors++)),"postcode"==e&&0==t.errors&&(d.test(a,"postcode")?d.removeError(a.parent()):(d.addError(a.parent(),s),t.errors++)),"phone"==e&&0==t.errors&&(d.test(a,"phone")?d.removeError(a.parent()):(d.addError(a.parent(),s),t.errors++))}};return{keypress:function(r){a("[data-field]").on("change keyup paste",function(){var t=a(this),s=t.attr("data-field");a(this).delayKeyup(function(r){a.each(e.fields,function(r,o){var n=a('[data-field="'+r+'"]'),e=r,i=!!isset(o.required)&&o.required;e==s&&(isset(o.change)&&o.change(t),o.errors=0,isset(o.tests)&&a.each(o.tests,function(r,e){var t=e.type,s=e.regex,a=e.message;i?d._tests(!0,t,o,a,n,s):""!=n.val()&&d._tests(!1,t,o,a,n,s)}))})},r)})},test:function(){a.each(e.fields,function(r,o){var n=a('[data-field="'+r+'"]'),i=!!isset(o.required)&&o.required;o.errors=0,isset(o.tests)&&a.each(o.tests,function(r,e){var t=e.type,s=e.regex,a=e.message;i?d._tests(!0,t,o,a,n,s):""!=n.val()&&d._tests(!1,t,o,a,n,s)})})},errors:function(){var t=0;return a.each(e.fields,function(r,e){t+=e.errors}),t}}},a.fn.formValid.defaults={fields:{}},a.fn.delayKeyup=function(r,e){var t=0,s=a(this);return a(this).keyup(function(){clearTimeout(t),t=setTimeout(function(){r(s)},e)}),a(this)}}(jQuery);